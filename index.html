<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</title>

  <!-- iOS Home Screen support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f7f7f7;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 34px; /* bigger title */
      margin-bottom: 20px;
    }
    .next {
      font-size: 26px;
      font-weight: bold;
      margin-bottom: 25px;
      color: #2c5f2d;
    }
    .time {
      font-size: 28px; /* bigger prayer times */
      margin: 14px 0;
    }
  </style>
</head>
<body>

  <h1>ğŸ•Œ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h1>
  <div id="next" class="next">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨â€¦</div>
  <div id="times">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</div>

  <script>
    fetch("https://api.aladhan.com/v1/timingsByCity?city=Istanbul&country=Turkey&method=13")
      .then(res => res.json())
      .then(data => {
        const t = data.data.timings;

        const prayers = [
          { name: "Ø§Ù„ÙØ¬Ø±", time: t.Fajr },
          { name: "Ø§Ù„Ø¸Ù‡Ø±", time: t.Dhuhr },
          { name: "Ø§Ù„Ø¹ØµØ±", time: t.Asr },
          { name: "Ø§Ù„Ù…ØºØ±Ø¨", time: t.Maghrib },
          { name: "Ø§Ù„Ø¹Ø´Ø§Ø¡", time: t.Isha }
        ];

        // Show prayer times
        document.getElementById("times").innerHTML = prayers
          .map(p => `<div class="time">${p.name}: ${p.time}</div>`)
          .join("");

        // Calculate next prayer
        const now = new Date();

        let nextPrayer = null;
        for (const p of prayers) {
          const [h, m] = p.time.split(":");
          const prayerTime = new Date();
          prayerTime.setHours(h, m, 0, 0);

          if (prayerTime > now) {
            nextPrayer = { name: p.name, time: prayerTime };
            break;
          }
        }

        // If after Isha â†’ next is Fajr tomorrow
        if (!nextPrayer) {
          const [h, m] = prayers[0].time.split(":");
          const prayerTime = new Date();
          prayerTime.setDate(prayerTime.getDate() + 1);
          prayerTime.setHours(h, m, 0, 0);
          nextPrayer = { name: prayers[0].name, time: prayerTime };
        }

        const diffMs = nextPrayer.time - now;
        const diffMin = Math.floor(diffMs / 60000);

        document.getElementById("next").innerText =
          `Ø¨Ø§Ù‚ÙŠ ${diffMin} Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù„Ù‰ ØµÙ„Ø§Ø© ${nextPrayer.name}`;
      })
      .catch(() => {
        document.getElementById("times").innerText = "ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª";
        document.getElementById("next").innerText = "";
      });
  </script>

</body>
</html>
